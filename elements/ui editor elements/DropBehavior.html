<style>
	[draggable] {
		-moz-user-select: none;
		-khtml-user-select: none;
		-webkit-user-select: none;
		user-select: none;
	}
	
	.acceptingContainer {
		border-radius: 5px;
		box-shadow: inset 0 0 10px #95FF68;
	}
			
	.refusingContainer {
		border-radius: 5px;
		box-shadow: inset 0 0 10px #FF6868;
	}
</style>
<script>
	DropBehavior = {

		properties: {
			uniqueID:
			{
			  type: Boolean,
			  value: false,
			  notify: true,
			  observer: '_highlightChanged'
			},
			
			UIElements:
			{
				type: Array,
				value: []
			},
			
			uniqueID:
			{
				value: 0
			}
		},

		listeners: {
			dragover: 'UIdragOver',
			dragleave: 'UIdragLeave',
			drop: 'UIdrop'
		},
		
		UIdragLeave: function (ev) {
			console.log("UIdragLeave ext behaviour");
			
			ev.stopPropagation();
			ev.preventDefault();
			
			this.toggleClass("acceptingContainer", 0, this.$.blockContainer);
			this.toggleClass("refusingContainer", 0, this.$.blockContainer);
		},

		UIdragOver: function (ev) {	
			console.log("UIdropOver ext behaviour");
			
			this.sendToasterMsgDisplayRequest("you can drop it here", "information");
			
			ev.stopPropagation();
			ev.preventDefault();
			
			this.toggleClass("acceptingContainer", 1, this.$.blockContainer);
		},
		
		UIdrop: function(ev) {
			console.log("UIdrop ext behaviour");
			
			ev.stopPropagation();
			ev.preventDefault();
			
			var data = ev.dataTransfer.getData("text/html");
			
			// Remove the class "dragged" which makes the icon low opacity
			$srcObject = document.getElementById(data);
			$($srcObject).removeClass("dragged");
			
			this.toggleClass("acceptingContainer", 0, this.$.blockContainer);
			this.toggleClass("refusingContainer", 0, this.$.blockContainer);
			
			var nodeCopy = document.createElement('div', data);			
			
			nodeCopy.id = this.id + "_" + this.increaseUniqueID(); /* We cannot use the same ID */
			nodeCopy.mode = "Development";
			nodeCopy.draggable = true;
			nodeCopy.addEventListener("modechanged", function(ev){ nodeCopy.mode = this.mode;});
			
			this.UIElements.push(nodeCopy);
			this.$.container.appendChild(nodeCopy);
			
			//Polymer.dom(nodeCopy).setAttribute("mode", "[[mode]]");
			this.sendToasterMsgDisplayRequest("dropped!", "information");
		},
		
		increaseUniqueID: function() {
			this.uniqueID = this.uniqueID + 1;
			return this.uniqueID;
		},
		
		sendRemoveUIChildRequest: function() {
			this.fire('removeUIChildRequest', { "node": this });
		}
    };
</script>